CREATE OR REPLACE FUNCTION protect_table (text) RETURNS integer AS 
$$
DECLARE
i integer;
BEGIN
EXECUTE 'ALTER TABLE '|| $1 ||' ADD COLUMN rule uuid';
EXECUTE 'ALTER TABLE '|| $1 ||' RENAME TO ' || $1 || '_protected';
EXECUTE 'CREATE OR REPLACE VIEW  '|| $1 ||' AS SELECT * FROM ' || $1 || '_protected';
-- возвращение  результата
i = 5;
return i;
END;
$$ LANGUAGE plpgsql;